<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
	<link rel="preconnect" href="https://unpkg.com" crossorigin>
	<link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
	<link rel="preconnect" href="https://www.google-analytics.com" crossorigin>
	<link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
	<link rel="dns-prefetch" href="//unpkg.com">
	<link rel="dns-prefetch" href="//www.googletagmanager.com">
	<link rel="dns-prefetch" href="//www.google-analytics.com">
	<title>Black & White Scan ‚Äî Infinite Tool</title>
	<style nonce="YWJjMTIz">
		:root {
			--bg: #ffffff;
			--text: #222;
			--muted: #666;
			--border: #e9e9e9;
			--accent: #222;
			--hover: #f8f8f8;
			--primary: #F89344;
			--secondary: #FF642F;
		}
		body {
			font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Helvetica, Arial, sans-serif;
			margin: 0;
			color: var(--text);
			background: var(--bg);
			line-height: 1.6;
		}
		.container { max-width: 1100px; margin: 0 auto; padding: 24px; }
		.ad-space-left { position: fixed; left: 0; top: 0; width: 160px; height: 100vh; background: #f8f8f8; border-right: 1px solid var(--border); z-index: 5; }
		.ad-space-right { position: fixed; right: 0; top: 0; width: 160px; height: 100vh; background: #f8f8f8; border-left: 1px solid var(--border); z-index: 5; }
		.main-content { margin-left: 160px; margin-right: 160px; }
		@media (max-width: 1200px) {
			.ad-space-left, .ad-space-right { display: none; }
			.main-content { margin-left: 0; margin-right: 0; }
		}
		.navbar { position: sticky; top: 0; background: var(--bg); z-index: 10; border-bottom: 1px solid var(--border); padding: 16px 0; margin-bottom: 24px; }
		.nav { display: flex; align-items: center; gap: 16px; }
		.nav .brand { font-weight: 600; font-size: 18px; }
		.nav a { color: var(--text); text-decoration: none; border: 1px solid var(--border); padding: 8px 16px; border-radius: 6px; transition: all .2s ease; }
		.nav a:hover { background: var(--hover); border-color: var(--primary); }
		.nav .logo { display:inline-flex; align-items:center; justify-content:center; width:44px; height:44px; border:none; border-radius:10px; font-weight:700; font-size:24px; line-height:1; color: var(--text); text-decoration:none; background:transparent; }
		.nav .logo:hover{ background: var(--hover); }
		.dropdown { position: relative; width: 320px; }
		.dropdown input { width: 100%; padding: 10px 12px; border: 1px solid var(--border); outline: none; border-radius: 6px; }
		.dropdown .menu { position: absolute; left: 0; right: 0; background: var(--bg); border: 1px solid var(--border); border-top: none; max-height: 280px; overflow: auto; display: none; border-radius: 0 0 6px 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
		.dropdown.open .menu { display: block; }
		.dropdown .item { padding: 10px 12px; cursor: pointer; border-top: 1px solid var(--border); transition: background 0.2s ease; }
		.dropdown .item:hover { background: var(--hover); }

		.drop-zone { border: 3px dashed var(--border); border-radius: 16px; padding: 60px 20px; text-align: center; background: var(--hover); transition: all 0.3s ease; cursor: pointer; margin-bottom: 24px; position: relative; }
		.drop-zone.dragover { border-color: var(--primary); background: rgba(248, 147, 68, 0.05); transform: scale(1.02); }
		.drop-zone .icon { font-size: 48px; margin-bottom: 16px; opacity: 1; background: rgba(10,102,255,.08); border: none; border-radius: 12px; width:64px; height:64px; display:inline-flex; align-items:center; justify-content:center; color:#0A66FF; }
		.drop-zone .text { font-size: 18px; font-weight: 500; margin-bottom: 8px; color: var(--text); }
		.drop-zone .subtext { font-size: 14px; color: var(--muted); }
		.drop-zone input[type="file"] { position: absolute; inset: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 1; }

		.controls { display: grid; grid-template-columns: repeat(5, minmax(160px, 1fr)); gap: 16px; margin: 24px 0; align-items: end; }
		label { font-size: 14px; color: var(--text); font-weight: 500; margin-bottom: 8px; display: block; }
		input[type="number"], select { width: 100%; padding: 12px 16px; border: 2px solid var(--border); outline: none; background: var(--bg); border-radius: 8px; font-size: 14px; transition: all 0.2s ease; }
		input[type="number"]:focus, select:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(248, 147, 68, 0.1); }
		button { appearance: none; border: none; background: var(--accent); color: #fff; padding: 14px 24px; cursor: pointer; border-radius: 8px; font-size: 14px; font-weight: 500; transition: all 0.2s ease; }
		button:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 2px 8px rgba(0,0,0,.15); }
		button:disabled { background: #999; cursor: not-allowed; }
		.note { font-size: 14px; color: var(--muted); }
		.row { display:flex; gap: 12px; flex-wrap: wrap; align-items: center; }

		.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 16px; }
		.item { border: 2px solid var(--border); border-radius: 12px; background: #fff; overflow: hidden; display: flex; flex-direction: column; }
		.item canvas { width: 100%; height: auto; display: block; background: #fff; }
		.item .meta { padding: 10px 12px; font-size: 12px; color: var(--muted); display:flex; justify-content: space-between; align-items:center; gap:8px; }
		.item .meta .name { color: var(--text); font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
		.item .actions { padding: 12px; display:flex; gap: 8px; }
		.btn-secondary { background: var(--secondary); }

		#errorBox { margin-top: 16px; padding: 16px; border: 1px solid #f1b0b7; background: #fdecef; color: #75000f; font-size: 14px; white-space: pre-wrap; display: none; border-radius: 8px; }
		@media (max-width: 900px){ .controls { grid-template-columns: 1fr 1fr; } }
		@media (max-width: 600px){ .controls { grid-template-columns: 1fr; } }
	</style>
	<script defer src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js" integrity="sha384-weMABwrltA6jWR8DDe9Jp5blk+tZQh7ugpCsF3JwSA53WZM9/14PjS5LAJNHNjAI" crossorigin="anonymous"></script>
	<script defer src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js" integrity="sha384-/1qUCSGwTur9vjf/z9lmu/eCUYbpOTgSjmpbMQZ1/CtX2v/WcAIKqRv+U1DUCG6e" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="ui.css">
	<script defer src="media-picker.js"></script>
    <script defer src="ui.js"></script>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
	<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' https://www.googletagmanager.com https://www.google-analytics.com https://unpkg.com https://cdnjs.cloudflare.com; connect-src 'self' https://www.google-analytics.com https://region1.google-analytics.com https://www.googletagmanager.com; worker-src 'self' https://cdnjs.cloudflare.com; img-src 'self' data: blob:; style-src 'self' 'nonce-YWJjMTIz'; font-src 'self' data:; object-src 'none'; base-uri 'self'; frame-ancestors 'none'; upgrade-insecure-requests">
	
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MNRVDK6WZB"></script>
    <script defer src="analytics.js"></script>
</head>
<body>
	<div class="ad-space-left"></div>
	<div class="ad-space-right"></div>
	<div class="main-content">
		<div class="container">
		<div class="navbar">
			<div class="nav">
				<a href="index.html" class="logo" aria-label="Home">‚àû</a>
				<div class="spacer"></div>
			</div>
		</div>

		<h1>üñ®Ô∏è Black & White Scan</h1>

		<div id="dropZone" class="drop-zone">
			<div class="icon">üìÑ</div>
			<div class="text">Drop images or PDFs here or click to browse</div>
			<div class="subtext">Supports PNG, JPG, GIF, SVG, and PDF</div>
			<input id="fileInput" type="file" accept="image/*,image/svg+xml,application/pdf" multiple style="display:none;">
		</div>

		<div class="controls">
			<div>
				<label for="threshold">B&W Threshold (0-255)</label>
				<input id="threshold" type="number" min="0" max="255" value="120">
			</div>
			<div>
				<label for="contrast">Contrast (+/-)</label>
				<input id="contrast" type="number" min="-100" max="100" value="50">
			</div>
			<div>
				<label for="sharpen">Sharpen (0-2)</label>
				<input id="sharpen" type="number" step="0.1" min="0" max="2" value="1">
			</div>
			<div>
				<label for="paperSize">Paper Size</label>
				<select id="paperSize">
					<option value="auto">Auto (from image)</option>
					<option value="a4">A4 (210√ó297 mm)</option>
					<option value="letter">Letter (8.5√ó11 in)</option>
					<option value="legal">Legal (8.5√ó14 in)</option>
					<option value="a3">A3 (297√ó420 mm)</option>
					<option value="a5">A5 (148√ó210 mm)</option>
				</select>
			</div>
			<div>
				<label for="dpi">Output DPI (for PDF)</label>
				<input id="dpi" type="number" min="72" max="600" value="200">
			</div>
		</div>

		<div class="row" style="margin-bottom:12px;">
			<button id="buildPdfBtn" disabled>üìÑ Export as PDF</button>
			<button id="downloadZipBtn" class="btn-secondary" disabled>üíæ Download ZIP (images)</button>
			<span id="hint" class="note">Add files to convert.</span>
		</div>

		<div id="grid" class="grid"></div>

		<div id="errorBox"></div>
		</div>
	</div>

	<script defer src="bw_scan.js"></script>
</body>
</html>


